{"ast":null,"code":"var _jsxFileName = \"/home/towha/Desktop/WillToWheel(Integrated)/v2/WillToWheel/frontend/src/MakePost.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport './styles/MakePost.css';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar csrf2, img_link;\nexport default function MakePost({\n  makePostButtonClicked,\n  setMakePostButtonClicked\n}) {\n  _s();\n  const [il, setil] = useState('');\n  const [csrf, setcsrf] = useState();\n  useEffect(() => {\n    // console.log(\"abiaudaihd\")\n    fetch(\"http://127.0.0.1:8000/api/users/getcsrf\").then(response => {\n      console.log(response.status);\n      return response.json();\n    }).then(data => {\n      setcsrf({\n        csrf: data.value\n      });\n      // console.log(allposts)\n      csrf2 = data;\n    });\n\n    // fetch(\"http://127.0.0.1:8000/api/users/getcurrentuser\").then((response) => {\n    // console.log(response.status)\n    // return response.json()}).then((data) => {\n    //     setil({il: 'http://127.0.0.1:8000/api/users' + data.profile_img})\n    //     img_link= 'http://127.0.0.1:8000/api/users' + data.profile_img\n    //     console.log(\"GG \"+data.profile_img)\n    //     console.log(il)\n    //     console.log(\"HERE\")\n    // })\n  }, []);\n  const [selectedImages, setSelectedImages] = useState();\n  const [postType, setPostType] = useState(\"Sale\");\n  const [postText, setPostText] = useState(\"\");\n  const vehicleType = \"SUV\";\n  function handlePostTYpeChange(e) {\n    setPostType(e.target.value);\n    console.log(e.target.value);\n  }\n  const onSelectFile = event => {\n    setSelectedImages(event.target.files[0]);\n    console.log(selectedImages);\n    console.log(\"noob\");\n  };\n  function deleteHandler(image) {\n    setSelectedImages(selectedImages.filter(e => e !== image));\n    URL.revokeObjectURL(image);\n  }\n\n  //   function sendToDB(){\n  //     const uploadData = new FormData();\n  //     uploadData.append('post_img', selectedImages, selectedImages.name);\n  //     uploadData.append('post_type', postType);\n  //     uploadData.append('car_type', vehicleType);\n  //     uploadData.append('body', postText);\n\n  //     // console.log(csrf2.value)\n  //     fetch(\"http://127.0.0.1:8000/api/users/getcsrf\").then((response) => {\n  //       console.log(response.status)\n  //       return response.json()}).then((data) => {\n  //           // setcsrf({csrf: data.value})\n  //           // console.log(allposts)\n  //           csrf2= data\n  //           fetch('http://127.0.0.1:8000/api/posts/addpost', {\n  //           method: 'POST',\n  //           mode: 'same-origin',\n  //           headers: {\n  //             // 'Accept': 'application/json',\n  //             // 'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW',\n  //             'X-CSRFToken': csrf2.value\n  //           },\n  //           body: uploadData\n  //         })\n  //         .then( res => console.log(res))\n  //         .catch(error => console.log(error))\n  //       })\n  //   // }\n  //     // fetch('http://127.0.0.1:8000/api/posts/addpost', {\n  //     //   method: 'POST',\n  //     //   mode: 'same-origin',\n  //     //   headers: {\n  //     //     // 'Accept': 'application/json',\n  //     //     // 'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW',\n  //     //     'X-CSRFToken': csrf2.value\n  //     //   },\n  //     //   body: uploadData\n  //     // })\n  //     // .then( res => console.log(res))\n  //     // .catch(error => console.log(error))\n  // }\n  // if(!il)return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"MakePostLayout\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"MakePostTextBoxLayout\",\n      placeholder: \"Enter Post Text\",\n      onChange: e => setPostText(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"MakePostPageCancelButtonLayout\",\n      onClick: () => setMakePostButtonClicked(!makePostButtonClicked),\n      children: \"Cancel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"MakePostPagePostButtonLayout\",\n      onClick: sendToDB,\n      children: \"Make Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Post Type:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"PostTypeChooseButtonLayout\",\n      name: \"Post\",\n      id: \"PostType\",\n      onChange: handlePostTYpeChange,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Sale\",\n        children: \"Sale\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"Rent\",\n        children: \"Rent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"UploadImageLayout\",\n      children: [\"Change\", /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          visibility: \"hidden\"\n        },\n        type: \"file\",\n        name: \"images\",\n        onChange: onSelectFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 50\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n}\n_s(MakePost, \"B7X8mfw67Jg5C5bqmQgaHR4hQho=\");\n_c = MakePost;\nvar _c;\n$RefreshReg$(_c, \"MakePost\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","csrf2","img_link","MakePost","makePostButtonClicked","setMakePostButtonClicked","_s","il","setil","csrf","setcsrf","fetch","then","response","console","log","status","json","data","value","selectedImages","setSelectedImages","postType","setPostType","postText","setPostText","vehicleType","handlePostTYpeChange","e","target","onSelectFile","event","files","deleteHandler","image","filter","URL","revokeObjectURL","className","children","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","sendToDB","name","id","style","visibility","type","_c","$RefreshReg$"],"sources":["/home/towha/Desktop/WillToWheel(Integrated)/v2/WillToWheel/frontend/src/MakePost.jsx"],"sourcesContent":["import React from 'react'\nimport './styles/MakePost.css'\nimport { useState } from 'react'\nimport { useEffect } from 'react'\n\n\nvar csrf2, img_link;\n\nexport default function MakePost({makePostButtonClicked, setMakePostButtonClicked}) {\n  const [il, setil] = useState('')\n  const [csrf, setcsrf] = useState()\n  useEffect(() => {\n  // console.log(\"abiaudaihd\")\n  fetch(\"http://127.0.0.1:8000/api/users/getcsrf\").then((response) => {\n    console.log(response.status)\n    return response.json()}).then((data) => {\n        setcsrf({csrf: data.value})\n        // console.log(allposts)\n        csrf2= data\n    })\n\n    // fetch(\"http://127.0.0.1:8000/api/users/getcurrentuser\").then((response) => {\n    // console.log(response.status)\n    // return response.json()}).then((data) => {\n    //     setil({il: 'http://127.0.0.1:8000/api/users' + data.profile_img})\n    //     img_link= 'http://127.0.0.1:8000/api/users' + data.profile_img\n    //     console.log(\"GG \"+data.profile_img)\n    //     console.log(il)\n    //     console.log(\"HERE\")\n    // })\n}, [])\n  \n    const [selectedImages, setSelectedImages] = useState()\n    const [postType, setPostType] = useState(\"Sale\")\n    const [postText, setPostText] = useState(\"\")\n    const vehicleType = \"SUV\"\n\n\n    function handlePostTYpeChange(e){\n      setPostType(e.target.value)\n      console.log(e.target.value)\n    }\n\n    const onSelectFile = (event) => {\n      setSelectedImages(event.target.files[0])\n      console.log(selectedImages)\n      console.log(\"noob\")\n    }\n\n    function deleteHandler(image) {\n        setSelectedImages(selectedImages.filter((e) => e !== image));\n        URL.revokeObjectURL(image);\n      }\n    \n      \n    \n    //   function sendToDB(){\n    //     const uploadData = new FormData();\n    //     uploadData.append('post_img', selectedImages, selectedImages.name);\n    //     uploadData.append('post_type', postType);\n    //     uploadData.append('car_type', vehicleType);\n    //     uploadData.append('body', postText);\n        \n    //     // console.log(csrf2.value)\n    //     fetch(\"http://127.0.0.1:8000/api/users/getcsrf\").then((response) => {\n    //       console.log(response.status)\n    //       return response.json()}).then((data) => {\n    //           // setcsrf({csrf: data.value})\n    //           // console.log(allposts)\n    //           csrf2= data\n    //           fetch('http://127.0.0.1:8000/api/posts/addpost', {\n    //           method: 'POST',\n    //           mode: 'same-origin',\n    //           headers: {\n    //             // 'Accept': 'application/json',\n    //             // 'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW',\n    //             'X-CSRFToken': csrf2.value\n    //           },\n    //           body: uploadData\n    //         })\n    //         .then( res => console.log(res))\n    //         .catch(error => console.log(error))\n    //       })\n    //   // }\n    //     // fetch('http://127.0.0.1:8000/api/posts/addpost', {\n    //     //   method: 'POST',\n    //     //   mode: 'same-origin',\n    //     //   headers: {\n    //     //     // 'Accept': 'application/json',\n    //     //     // 'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW',\n    //     //     'X-CSRFToken': csrf2.value\n    //     //   },\n    //     //   body: uploadData\n    //     // })\n    //     // .then( res => console.log(res))\n    //     // .catch(error => console.log(error))\n    // }\n    // if(!il)return null;\n    return (\n    <div className='MakePostLayout'>\n      <textarea className='MakePostTextBoxLayout' placeholder='Enter Post Text' onChange={e => setPostText(e.target.value)}></textarea>\n      \n      <button className=\"MakePostPageCancelButtonLayout\" onClick={() => setMakePostButtonClicked(!makePostButtonClicked)}>Cancel</button>\n      <button className='MakePostPagePostButtonLayout' onClick={sendToDB}>Make Post</button>\n\n      <label>Post Type:</label>\n\n      <select className = \"PostTypeChooseButtonLayout\" name=\"Post\" id=\"PostType\" onChange={handlePostTYpeChange}>\n        <option value=\"Sale\">Sale</option>\n        <option value=\"Rent\">Rent</option>\n      </select>\n\n      <label className='UploadImageLayout'>Change<input style = {{visibility: \"hidden\"}} type = 'file' name = 'images' onChange={onSelectFile}></input></label>\n                 \n      {/* <input type=\"file\" multiple />\n\n      {selectedImages.length > 0 &&\n        (selectedImages.length > 10 ? (\n          <p className=\"error\">\n            You can't upload more than 10 images! <br />\n            <span>\n              please delete <b> {selectedImages.length - 10} </b> of them{\" \"}\n            </span>\n          </p>\n        ) : (\n          <button\n            className=\"upload-btn\"\n            onClick={() => {\n              console.log(selectedImages);\n            }}\n          >\n            UPLOAD {selectedImages.length} IMAGE\n            {selectedImages.length === 1 ? \"\" : \"S\"}\n          </button>\n        ))} */}\n\n      {/* <div className=\"images\">\n        {selectedImages &&\n          selectedImages.map((image, index) => {\n            return (\n              <div key={image} className=\"image\">\n                <img src={image} height=\"200\" alt=\"upload\" />\n                <button onClick={() => deleteHandler(image)}>\n                  delete image\n                </button>\n                <p>{index + 1}</p>\n              </div>\n            );\n          })}\n      </div> */}\n\n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}